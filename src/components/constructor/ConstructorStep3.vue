<template>
  <constructor-step
    title="шаг 3. информация об отправителе"
    back="Вернуться назад"
  >
    <label 
      class="form__field"
      :class="{
        error: validationStatus($v.sender) || this.errorMessage.sender,
      }"
    >
      <div class="form__caption">
        от кого видеопоздравление
        <div
          class="form__tooltip"
          v-tooltip.bottom="{
            content:
              'Впишите свое имя в&nbsp;родительном падеже, например: (от) Маши. Текст будет указан на&nbsp;открытке в&nbsp;видеопоздравлении',
            trigger: 'click',
          }"
        >
          <svg
            width="14"
            height="15"
            viewBox="0 0 14 15"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M6.3998 8.41V7.86C6.3998 7.71333 6.40647 7.59 6.4198 7.49C6.4398 7.38333 6.4698 7.29 6.5098 7.21C6.55647 7.12333 6.61314 7.04333 6.6798 6.97C6.75314 6.89 6.8398 6.79667 6.9398 6.69L7.7098 5.91C7.87647 5.74333 7.9598 5.52667 7.9598 5.26C7.9598 5 7.87314 4.79 7.6998 4.63C7.53314 4.46333 7.3198 4.38 7.0598 4.38C6.7798 4.38 6.5498 4.47667 6.3698 4.67C6.1898 4.85667 6.08647 5.08667 6.0598 5.36L4.7798 5.26C4.8198 4.94 4.90314 4.65667 5.0298 4.41C5.15647 4.15667 5.3198 3.94333 5.5198 3.77C5.72647 3.59667 5.96314 3.46667 6.2298 3.38C6.49647 3.28667 6.7898 3.24 7.1098 3.24C7.4098 3.24 7.68647 3.28333 7.9398 3.37C8.1998 3.45667 8.42314 3.58333 8.6098 3.75C8.80314 3.91 8.95314 4.11333 9.0598 4.36C9.16647 4.6 9.2198 4.87667 9.2198 5.19C9.2198 5.41 9.1898 5.60333 9.1298 5.77C9.0698 5.93667 8.98981 6.09 8.8898 6.23C8.7898 6.37 8.67314 6.50333 8.5398 6.63C8.41314 6.75667 8.27647 6.89 8.1298 7.03C8.03647 7.11667 7.95647 7.19333 7.8898 7.26C7.82314 7.32667 7.76647 7.39667 7.7198 7.47C7.6798 7.53667 7.6498 7.61667 7.6298 7.71C7.6098 7.79667 7.5998 7.90333 7.5998 8.03V8.41H6.3998ZM6.1998 9.8C6.1998 9.58667 6.27647 9.40333 6.4298 9.25C6.5898 9.09667 6.7798 9.02 6.9998 9.02C7.21314 9.02 7.3998 9.09333 7.5598 9.24C7.7198 9.38667 7.7998 9.56667 7.7998 9.78C7.7998 9.99333 7.7198 10.1767 7.5598 10.33C7.40647 10.4833 7.2198 10.56 6.9998 10.56C6.89314 10.56 6.7898 10.54 6.6898 10.5C6.59647 10.46 6.51314 10.4067 6.4398 10.34C6.36647 10.2733 6.30647 10.1933 6.2598 10.1C6.2198 10.0067 6.1998 9.90667 6.1998 9.8Z"
              fill="white"
            />
            <circle cx="7" cy="7" r="6.5" stroke="white" />
          </svg>
        </div>
      </div>
      <span></span>
      <vue-infinite-autocomplete
        id="sender_name"
        :data-source="senderNames"
        :value="sender"
        v-on:select="handleOnSelect"
      >
      </vue-infinite-autocomplete>
      <div v-if="validationStatus($v.sender)" class="error-hint" v-html="!$v.sender.required && $v.sender.$error ? 'Обязательное поле' : ''"></div>
    </label>
    <button
      type="button"
      @click="goToNext()"
      class="constructor-step__button btn btn--bordered"
    >
      продолжить
    </button>
  </constructor-step>
</template>

<script>
import ConstructorStep from "../ConstructorStep.vue";
import VueInfiniteAutocomplete from "vue-infinite-autocomplete";

import { required } from "vuelidate/lib/validators";

export default {
  data: () => ({
    sender: null,
    senderNames: [
      { text: "Августина" },
      { text: "Авраама" },
      { text: "Агафона" },
      { text: "Алана" },
      { text: "Александра" },
      { text: "Алексея" },
      { text: "Алеши" },
      { text: "Али" },
      { text: "Алихана" },
      { text: "Альберта" },
      { text: "Амира" },
      { text: "Анатолия" },
      { text: "Андрея" },
      { text: "Андрюши" },
      { text: "Анисия" },
      { text: "Антона" },
      { text: "Антоши" },
      { text: "Аристарха" },
      { text: "Аркадия" },
      { text: "Аркаши" },
      { text: "Арсена" },
      { text: "Арсения" },
      { text: "Арслана" },
      { text: "Артёма" },
      { text: "Артемия" },
      { text: "Артура" },
      { text: "Архипа" },
      { text: "Арчила" },
      { text: "Байрака" },
      { text: "Богдана" },
      { text: "Болеслава" },
      { text: "Бориса" },
      { text: "Бори" },
      { text: "Борислава" },
      { text: "Бронислава" },
      { text: "Булата" },
      { text: "Вадима" },
      { text: "Валентина" },
      { text: "Вали" },
      { text: "Валерия" },
      { text: "Валеры" },
      { text: "Василия" },
      { text: "Васи" },
      { text: "Вениамина" },
      { text: "Вени" },
      { text: "Викентия" },
      { text: "Виктора" },
      { text: "Вити" },
      { text: "Вилена" },
      { text: "Виссариона" },
      { text: "Виталия" },
      { text: "Виталика" },
      { text: "Влада" },
      { text: "Владимира" },
      { text: "Володи" },
      { text: "Вовы" },
      { text: "Владислава" },
      { text: "Владлена" },
      { text: "Всеволода" },
      { text: "Вячеслава" },
      { text: "Вани" },
      { text: "Гавриила" },
      { text: "Геннадия" },
      { text: "Гены" },
      { text: "Георгия" },
      { text: "Гоши" },
      { text: "Германа" },
      { text: "Геры" },
      { text: "Глеба" },
      { text: "Гордея" },
      { text: "Григория" },
      { text: "Гриши" },
      { text: "Давида" },
      { text: "Даниила" },
      { text: "Дани" },
      { text: "Данияра" },
      { text: "Демьяна" },
      { text: "Дениса" },
      { text: "Динара" },
      { text: "Дмитрия" },
      { text: "Димы" },
      { text: "Евгения" },
      { text: "Евдокима" },
      { text: "Егора" },
      { text: "Елисея" },
      { text: "Ефима" },
      { text: "Ефрема" },
      { text: "Ждана" },
      { text: "Жени" },
      { text: "Захара" },
      { text: "Зиновия" },
      { text: "Ивана" },
      { text: "Игнатия" },
      { text: "Игната" },
      { text: "Игоря" },
      { text: "Иллариона" },
      { text: "Ильи" },
      { text: "Илюши" },
      { text: "Иннокентия" },
      { text: "Иосифа" },
      { text: "Ираклия" },
      { text: "Ислама" },
      { text: "Ильдара" },
      { text: "Казимира" },
      { text: "Камбара" },
      { text: "Камиля" },
      { text: "Карима" },
      { text: "Касьяна" },
      { text: "Кирилла" },
      { text: "Киры" },
      { text: "Клима" },
      { text: "Константина" },
      { text: "Кости" },
      { text: "Кузьмы" },
      { text: "Кузи" },
      { text: "Кеши" },
      { text: "Коли" },
      { text: "Льва" },
      { text: "Лёвы" },
      { text: "Леона" },
      { text: "Леонида" },
      { text: "Лёни" },
      { text: "Леонтия" },
      { text: "Лукьяна" },
      { text: "Луки" },
      { text: "Леши" },
      { text: "Макара" },
      { text: "Максима" },
      { text: "Макса" },
      { text: "Марата" },
      { text: "Марка" },
      { text: "Матвея" },
      { text: "Моти" },
      { text: "Махера" },
      { text: "Мирона" },
      { text: "Митрофана" },
      { text: "Мити" },
      { text: "Михаила" },
      { text: "Миши" },
      { text: "Моисея" },
      { text: "Мурата" },
      { text: "Мухаммеда" },
      { text: "Назара" },
      { text: "Наума" },
      { text: "Никанора" },
      { text: "Никиты" },
      { text: "Никифора" },
      { text: "Николая" },
      { text: "Никона" },
      { text: "Нурислама" },
      { text: "Нурлана" },
      { text: "Нурика" },
      { text: "Олега" },
      { text: "Омара" },
      { text: "Павла" },
      { text: "Паши" },
      { text: "Парамона" },
      { text: "Петра" },
      { text: "Пети" },
      { text: "Платона" },
      { text: "Прохора" },
      { text: "Проши" },
      { text: "Расула" },
      { text: "Рената" },
      { text: "Рината" },
      { text: "Роберта" },
      { text: "Роба" },
      { text: "Родиона" },
      { text: "Роди" },
      { text: "Романа" },
      { text: "Ромы" },
      { text: "Ростислава" },
      { text: "Ростика" },
      { text: "Руслана" },
      { text: "Руси" },
      { text: "Рустама" },
      { text: "Савелия" },
      { text: "Савы" },
      { text: "Самсона" },
      { text: "Сэма" },
      { text: "Самуила" },
      { text: "Санжара" },
      { text: "Святослава" },
      { text: "Севастьяна" },
      { text: "Семёна" },
      { text: "Сергея" },
      { text: "Сережи" },
      { text: "Станислава" },
      { text: "Стаса" },
      { text: "Степана" },
      { text: "Степы" },
      { text: "Саши" },
      { text: "Славы" },
      { text: "Сени" },
      { text: "Тараса" },
      { text: "Терентия" },
      { text: "Тимофея" },
      { text: "Тимоши" },
      { text: "Тимура" },
      { text: "Тихона" },
      { text: "Тиши" },
      { text: "Трофима" },
      { text: "Троши" },
      { text: "Темы" },
      { text: "Фаддея" },
      { text: "Федора" },
      { text: "Феди" },
      { text: "Федота" },
      { text: "Филимона" },
      { text: "Филиппа" },
      { text: "Фили" },
      { text: "Фимы" },
      { text: "Ульяна" },
      { text: "Эдгара" },
      { text: "Эдди" },
      { text: "Эдуарда" },
      { text: "Эдика" },
      { text: "Эльдара" },
      { text: "Юлиана" },
      { text: "Юлика" },
      { text: "Юлия" },
      { text: "Юмы" },
      { text: "Юрия" },
      { text: "Юры" },
      { text: "Якова" },
      { text: "Яна" },
      { text: "Ярослава" },
      { text: "Ярика" },
      { text: "Аглаи" },
      { text: "Авроры" },
      { text: "Агаты" },
      { text: "Агнессы" },
      { text: "Агнии" },
      { text: "Ады" },
      { text: "Аделаиды" },
      { text: "Адели" },
      { text: "Аделины" },
      { text: "Адины" },
      { text: "Азалии" },
      { text: "Айлины" },
      { text: "Айсултаны" },
      { text: "Акулины" },
      { text: "Алевтины" },
      { text: "Александры" },
      { text: "Алёны" },
      { text: "Алины" },
      { text: "Алисы" },
      { text: "Аллы" },
      { text: "Алсу" },
      { text: "Альбины" },
      { text: "Али" },
      { text: "Альмиры" },
      { text: "Алтаны" },
      { text: "Амалии" },
      { text: "Амелии" },
      { text: "Амины" },
      { text: "Анастасии" },
      { text: "Ангелины" },
      { text: "Анжелы" },
      { text: "Анжелики" },
      { text: "Анны" },
      { text: "Ани" },
      { text: "Антонины" },
      { text: "Анфисы" },
      { text: "Ариадны" },
      { text: "Арины" },
      { text: "Аси" },
      { text: "Беллы" },
      { text: "Божены" },
      { text: "Брониславы" },
      { text: "Валентины" },
      { text: "Вали" },
      { text: "Валерии" },
      { text: "Василисы" },
      { text: "Венеры" },
      { text: "Веры" },
      { text: "Вероники" },
      { text: "Виктории" },
      { text: "Вики" },
      { text: "Виолетты" },
      { text: "Веты" },
      { text: "Виты" },
      { text: "Владиславы" },
      { text: "Влады" },
      { text: "Галины" },
      { text: "Гали" },
      { text: "Галии" },
      { text: "Глафиры" },
      { text: "Глаши" },
      { text: "Гульмиры" },
      { text: "Гули" },
      { text: "Гели" },
      { text: "Даны" },
      { text: "Даниэлы" },
      { text: "Дарины" },
      { text: "Дарьи" },
      { text: "Даши" },
      { text: "Даяны" },
      { text: "Дианы" },
      { text: "Дили" },
      { text: "Дины" },
      { text: "Динары" },
      { text: "Дуси" },
      { text: "Евы" },
      { text: "Евгении" },
      { text: "Евдокии" },
      { text: "Екатерины" },
      { text: "Елены" },
      { text: "Елизаветы" },
      { text: "Есении" },
      { text: "Ефросиньи" },
      { text: "Жанны" },
      { text: "Жаны" },
      { text: "Заиры" },
      { text: "Земфиры" },
      { text: "Зинаиды" },
      { text: "Зины" },
      { text: "Златы" },
      { text: "Зоряны" },
      { text: "Зои" },
      { text: "Иветты" },
      { text: "Изабеллы" },
      { text: "Изы" },
      { text: "Изольды" },
      { text: "Илоны" },
      { text: "Ингы" },
      { text: "Инессы" },
      { text: "Инны" },
      { text: "Ираиды" },
      { text: "Иды" },
      { text: "Ирины" },
      { text: "Иры" },
      { text: "Калерии" },
      { text: "Камиллы" },
      { text: "Камилы" },
      { text: "Капитолины" },
      { text: "Карины" },
      { text: "Каролины" },
      { text: "Киры" },
      { text: "Клавдии" },
      { text: "Клавы" },
      { text: "Клары" },
      { text: "Кларисы" },
      { text: "Кристины" },
      { text: "Ксении" },
      { text: "Ксюши" },
      { text: "Кати" },
      { text: "Катерины" },
      { text: "Лады" },
      { text: "Ларисы" },
      { text: "Лары" },
      { text: "Леси" },
      { text: "Лидии" },
      { text: "Лиды" },
      { text: "Лики" },
      { text: "Лилианы" },
      { text: "Лилии" },
      { text: "Лили" },
      { text: "Лины" },
      { text: "Лолиты" },
      { text: "Лолы" },
      { text: "Любови" },
      { text: "Любы" },
      { text: "Людмилы" },
      { text: "Люды" },
      { text: "Ляйсан" },
      { text: "Ляси" },
      { text: "Лики" },
      { text: "Леры" },
      { text: "Лены" },
      { text: "Лизы" },
      { text: "Ланы" },
      { text: "Леси" },
      { text: "Лёле" },
      { text: "Магдалины" },
      { text: "Магдалены" },
      { text: "Мадины" },
      { text: "Магды" },
      { text: "Майи" },
      { text: "Маргариты" },
      { text: "Марианны" },
      { text: "Марины" },
      { text: "Марии" },
      { text: "Маши" },
      { text: "Маруси" },
      { text: "Марты" },
      { text: "Марфы" },
      { text: "Медины" },
      { text: "Мелиссы" },
      { text: "Мелисы" },
      { text: "Милы" },
      { text: "Миланы" },
      { text: "Милены" },
      { text: "Мирославы" },
      { text: "Мирры" },
      { text: "Миры" },
      { text: "Милы" },
      { text: "Надежды" },
      { text: "Нади" },
      { text: "Наили" },
      { text: "Наталии" },
      { text: "Натальи" },
      { text: "Наташи" },
      { text: "Нелли" },
      { text: "Нели" },
      { text: "Ники" },
      { text: "Николь" },
      { text: "Нины" },
      { text: "Нинель" },
      { text: "Нонны" },
      { text: "Норы" },
      { text: "Насти" },
      { text: "Нели" },
      { text: "Ники" },
      { text: "Оксаны" },
      { text: "Олеси" },
      { text: "Ольгы" },
      { text: "Оли" },
      { text: "Полины" },
      { text: "Поли" },
      { text: "Прасковьи" },
      { text: "Рады" },
      { text: "Радмилы" },
      { text: "Раисы" },
      { text: "Раи" },
      { text: "Раяны" },
      { text: "Регины" },
      { text: "Ренаты" },
      { text: "Риммы" },
      { text: "Римы" },
      { text: "Риты" },
      { text: "Розы" },
      { text: "Роксаны" },
      { text: "Русланы" },
      { text: "Рины" },
      { text: "Сабины" },
      { text: "Самиры" },
      { text: "Сарры" },
      { text: "Сары" },
      { text: "Светланы" },
      { text: "Светы" },
      { text: "Серафимы" },
      { text: "Фимы" },
      { text: "Снежаны" },
      { text: "Снежи" },
      { text: "Софии" },
      { text: "Софьи" },
      { text: "Сони" },
      { text: "Стеллы" },
      { text: "Стелы" },
      { text: "Стефании" },
      { text: "Стеши" },
      { text: "Стаси" },
      { text: "Славы" },
      { text: "Сени" },
      { text: "Славы" },
      { text: "Таисии" },
      { text: "Таи" },
      { text: "Тамары" },
      { text: "Томы" },
      { text: "Тамилы" },
      { text: "Татьяны" },
      { text: "Тани" },
      { text: "Тины" },
      { text: "Томирис" },
      { text: "Тони" },
      { text: "Ульяны" },
      { text: "Ули" },
      { text: "Урсулы" },
      { text: "Фаины" },
      { text: "Фаи" },
      { text: "Фариды" },
      { text: "Фатимы" },
      { text: "Фроси" },
      { text: "Хины" },
      { text: "Шакиры" },
      { text: "Шахины" },
      { text: "Эдиты" },
      { text: "Элеоноры" },
      { text: "Эли" },
      { text: "Элины" },
      { text: "Эллы" },
      { text: "Эли" },
      { text: "Эльвиры" },
      { text: "Эльнары" },
      { text: "Элин" },
      { text: "Юлианы" },
      { text: "Юлии" },
      { text: "Юли" },
      { text: "Юны" },
      { text: "Яны" },
      { text: "Янины" },
      { text: "Ясмины" },

    ],
    errorMessage: {
      sender: null,
    },
  }),
  validations: {
    sender: { required },
  },
  methods: {
    validationStatus: function (validation) {
      return typeof validation != "undefined" ? validation.$error : false;
    },
    errorReset() {
      this.$v.$reset();

      this.errorMessage = {
        sender: null,
      };
    },
    handleOnSelect(selectedValue) {
      this.sender = selectedValue.text;
    },
    goToNext() {
      this.$v.$touch();
      if (this.$v.$error) return;
      this.$store.commit("CHANGE_SENDER_NAME", this.sender);

      this.$root.$emit("nextStep");
    },
  },

  mounted() {
    setTimeout(() => {
      const sender = document
        .getElementById("sender_name")
        .querySelector("input");
      if (sender) {
        sender.setAttribute("placeholder", "Ваше имя");
      }
    }, 100);
    
  },
  components: { ConstructorStep, VueInfiniteAutocomplete },
};
</script>

<style lang="scss" scoped></style>
